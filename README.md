# rust-treasure-realm-precourse

## 기능 기획

TFT(전략적 팀 전투)의 **보물 왕국**에서 영감을 받은 Rust CLI 가챠 시뮬레이션을 구현한다.<br/>
사용자는 TFT 코인 패키지를 구매하고, 코인으로 보물 토큰을 획득해 뽑기를 진행한다.<br/>
뽑기 과정에서 '신화 메달'을 모을 수 있으며, 프레스티지 전설이 획득 시 즉시 종료한다.

- 사용자의 입력 예산으로 아래 TFT 코인 패키지 단위로만 구매하며 남은 금액은 사용할 수 없다.
  - 6,800원 ⇒ 575코인
  - 30,000원 ⇒ 2,800코인
  - 68,000원 ⇒ 6,500코인
- 패키지는 효율 높은 순으로 구매한다. (68,000원 → 30,000원 → 6,800원)
- 195코인당 보물 토큰 50개를 구매할 수 있으며, 뽑기 1회 = 50토큰 = 195코인 소모이다.
- 사용자는 CLI에서 다음 명령으로 뽑기/종료를 수행한다.
  - `draw 1` : 1회 뽑기
  - `draw 10` : 10회 뽑기
  - `exit` : 수동 종료
- 뽑기 보상과 확률은 아래와 같다.
  - 프레스티지 전설이: 0.01%
  - 신화급 전설이: 0.3%
  - 전설급 전설이: 5%
  - 일반급 전설이: 40%
  - 왕국 수정: 54.38995%
  - 신화 메달 5개: 0.30005%
- 누적 뽑기 횟수 20회·40회에 각 +1, 60회에 +2개의 신화 메달을 획득한 후 보너스 횟수 카운트가 초기화된다.
- 종료 시 누적 뽑기 횟수, 획득 보상, 신화 메달 개수, TFT 코인 잔액을 출력한다.
  - 뽑기에서 프레스티지 전설이를 획득한 경우 종료한다.
  - TFT 코인이 195코인 미만인 경우 종료한다.
  - 25개의 신화 메달이 모이면 메달을 소모해 프레스티지 전설이를 확정 획득하고 종료한다.
- 프레스티지 전설이 또는 신화급 전설이가 2개 이상 등장한 경우, 종료 시 각 등급별로 1개만 유지하고, 초과된 전설이는 각각 신화 메달 25, 10개로 중복 보상을 지급한다.
- 사용자가 잘못된 값을 입력할 경우 "[ERROR]"로 시작하는 메시지와 함께 Error를 발생시키고 해당 메시지를 출력한 다음 해당 지점부터 다시 입력을 받는다.

### 입출력 설계

**입력**

- TFT 코인 구입 금액을 입력 받는다. 구입 금액은 최소 6,800원 이상을 입력 받으며 6,800원 미만의 값을 입력한 경우 예외 처리한다.
<pre>
    30000
</pre>

- 명령을 입력 받는다.
<pre>
    draw 10
</pre>

**출력**

- 누적 뽑기 횟수와 획득 보상, 남은 TFT 코인을 출력한다.
<pre>
    ===================================
    10회 뽑기 결과 (총 10회)
  
    [프레스티지]미니 영혼의 꽃 아리 🌟 - 1개
    [신화]미니 우주 그루브 블리츠크랭크 🥊 - 1개
    [전설]형님 샥샥이 🦈 - 1개
    [일반]울끈불끈 집게발 🦞 - 1개
    왕국 수정 🔮 - 5개
    신화 메달 🎖️ - 1개

    남은 TFT 코인: 850코인
    ===================================
</pre>

- 종료 시 누적 뽑기 횟수와 획득 보상, 신화 메달 개수, TFT 코인 잔액을 출력한다.
<pre>
    뽑기가 종료되었습니다.
    ===================================
    뽑기 결과 (총 10회)
    
    [프레스티지]미니 영혼의 꽃 아리 🌟 - 1개
    [신화]미니 우주 그루브 블리츠크랭크 🥊 - 1개
    [전설]형님 샥샥이 🦈 - 1개
    [일반]울끈불끈 집게발 🦞 - 1개
    왕국 수정 🔮 - 5개
    신화 메달 🎖️ - 1개

    신화 메달: 5개
    TFT 코인: 850코인
    ===================================
</pre>

- 20회·40회에 각 +1, 60회에 +2개의 신화 메달을 획득하고 출력한다.
<pre>
    🍀 20회 뽑기 보상: 신화 메달 1개 획득 🍀
</pre>
- 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.
<pre>
    [ERROR] 구입 금액은 최소 6,800원 이상 입력해야 합니다.
</pre>

**실행 결과 예시**

<pre>
    뽑기를 진행할 금액을 입력해 주세요.
    30000

    다음 명령 중 하나를 입력해 주세요. ( draw 1 / draw 10 / exit )
    draw 10

    ===================================
    10회 뽑기 결과 (총 10회)
  
    [신화]미니 우주 그루브 블리츠크랭크 🥊 - 1개
    [전설]형님 샥샥이 🦈 - 1개
    [일반]울끈불끈 집게발 🦞 - 1개
    왕국 수정 🔮 - 6개
    신화 메달 🎖️ - 1개

    남은 TFT 코인: 850코인
    ===================================

    다음 명령 중 하나를 입력해 주세요. ( draw 1 / draw 10 / exit )
    draw 10

    [ERROR] TFT 코인이 1,100코인 부족합니다.

    다음 명령 중 하나를 입력해 주세요. ( draw 1 / draw 10 / exit )
    draw 1

    ===================================
    1회 뽑기 결과 (총 11회)
  
    [신화]미니 우주 그루브 블리츠크랭크 🥊 - 1개

    남은 TFT 코인: 655코인
    ===================================

    다음 명령 중 하나를 입력해 주세요. ( draw 1 / draw 10 / exit )
    draw 1

    ===================================
    1회 뽑기 결과 (총 12회)
  
    [프레스티지]미니 영혼의 꽃 아리 🌟 - 1개

    남은 TFT 코인: 460코인
    ===================================
    
    뽑기가 종료되었습니다.
    ===================================
    뽑기 결과 (총 12회)
  
    [프레스티지]미니 영혼의 꽃 아리 🌟 - 1개
    [신화]미니 우주 그루브 블리츠크랭크 🥊 - 1개
    [전설]형님 샥샥이 🦈 - 1개
    [일반]울끈불끈 집게발 🦞 - 1개
    왕국 수정 🔮 - 6개
    신화 메달 🎖️ - 1개

    신화 메달: 15개
    TFT 코인: 460코인
    ===================================
</pre>

##

## 구현할 기능 목록

- [ ] 초기 설정 및 상수 정의
  - TFT 코인 패키지 상수 정의
  - 뽑기 확률 상수 정의
  - 뽑기 코인 소모량, 신화 메달 개수 상수 정의
- [ ] 데이터 구조 설계
  - 보상 아이템 정의
  - 사용자 상태 정의
- [ ] TFT 코인 구매 로직
  - 사용자 예산 입력받기
  - 효율 순 코인 패키지 구매
  - 구매 코인 사용자 상태에 반영
- [ ] 가챠 시뮬레이션
  - 정의된 확률에 따라 아이템 반환 로직 구현
  - 사용자 입력 문자열 파싱
  - 뽑기 횟수만큼 뽑기 함수 반복 실행
  - 소모 코인, 총 뽑기 횟수, 획득 보상 사용자 상태에 반영
  - 누적 횟수별 정해진 신화 메달 지급
- [ ] 뽑기 종료 조건
  - 프레스티지 전설이 획득 종료
  - TFT 코인 잔액 부족 종료
  - 신화 메달 25개 확정 획득 종료
  - 사용자 수동 종료
- [ ] 뽑기 결과 출력
  - 사용자 뽑기 중간 결과 출력
  - 중복된 보상 신화 메달로 지급
  - 뽑기 종료 최종 결과 출력
